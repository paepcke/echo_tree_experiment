// Check for browser support:
if(typeof(WebSocket)!=="undefined") {

    var ws = new WebSocket("ws://localhost:5001/subscribe_to_echo_trees");

    ws.onopen = function () {
    };

    ws.onerror = function () {
	//writeToScreen('<span style="color: red;">ERROR:</span> ' + evt.data);
	alert('ERROR: ' + evt.data);
    };

    ws.onmessage = function (event) {
	try {
	    if (event.data.length == 0)
		return;
	    root = eval("(" + event.data + ")");
	} catch(err) {
	    return;
	}
    }

} else {
    // WebSockets not supported in this browser:
    document.getElementById("userMsg").innerHTML="Whoops! Your browser doesn't support WebSockets.";
}
